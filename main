#include "biblioJeu.h"

/*----------------------------------------------------------*/
int main()
{
    //Déclarations
    int nbJoueurs, i, cptNbvivants;
    int d=1;
    int c=0;
    t_joueur *tabJoueurs;   //Tableau de joueurs
    tabJoueurs = (t_joueur*) malloc(4*sizeof(t_joueur));

    //Bitmaps
    BITMAP* map;
    BITMAP* page;
    BITMAP* spriteDresseur[4][16];
    BITMAP* spritePokemon[4];
    BITMAP* spritePokeAttack[4][4];

    // Initialisation d'Allegro
    initialisationAllegro();

    //install_keyboard(); //Installation du clavier

    if (install_mouse() == -1)    //Installation de la souris
    {
        textprintf_ex(screen, font, 100, 10, makecol(255,0,0), -1, "Erreur installation de la souris");
        return 1;
    }

    show_mouse(screen); //Permet de montrer la souris à l'écran
    do{
    //Appel Fonction début partie
    menuDemarrage();

    //Appel de la fonction pour le choix du nombre de joueurs
    nbJoueurs=choixNbJoueurs(tabJoueurs);

    //Appel fonction classe des Joueurs
    choixClasseJoueur(tabJoueurs,nbJoueurs);
    do{
    page=create_bitmap(1024,768);
    extractionSprite(spriteDresseur, spritePokemon, spritePokeAttack);
    //deplace(map,page,spriteDresseur,tabJoueurs,0,4);

    //Boucle de jeu
    do
    {   
          for(i=0;i<nbJoueurs;i++)
          {
              tourJoueur(tabJoueurs,i,nbJoueurs,map,page,spriteDresseur);
              //cptNbvivants=classement(nbJoueurs);
          }
    }while(cptNbvivant!=1)
   d=affichefin(nbJoueurs);//pour recommencer une partie, aller au menu ou quitter
   }while(d==1);
}while(c==0);
    free(tabJoueurs);

    return 0;  // Fin du main

}END_OF_MAIN();  //Macro pour quitter Allegro
/*-----------------------------------------------------------------------------------------------------*/
